## `http`缓存

### `http 1.0`

`http 1.0` 的缓存机制是 `Expires` ，其值为服务器返回该请求结果缓存的到期时间

***缺点：***

`Expires` 控制缓存的原理是使用客户端的时间与服务端返回的时间做对比，那么如果客户端与服务端的时间因为某些原因（例如时区不同；客户端和服务端有一方的时间不准确）发生误差，那么强制缓存则会直接失效，这样的话强制缓存的存在则毫无意义 



### `http 1.1`

分为强制缓存和协商缓存

**强制缓存 `Cache-Control` **

`Cache-Control` 的优先级高于 `Expires`，共有5个值：

1. `public` ： 所有内容都将被缓存（客户端和代理服务器都可缓存） 
2. `private` ： 所有内容只有客户端可以缓存，`Cache-Control` 的默认取值 
3. `no-cache` ： 客户端缓存内容，但是是否使用缓存则需要经过协商缓存来验证决定 
4. `no-store` ： 所有内容都不会被缓存，即不使用强制缓存，也不使用协商缓存 
5. `max-age=xxx` ： 缓存内容将在 `xxx` 秒后失效 

缓存数据来源：`from memary cache` ， `from dist cache`

**协商缓存**

- `Last-Modified` 和 `If-Modified-Since`
  - `Last-Modified` 是服务器响应请求时，返回资源最后修改的时间
  - `If-Modified-Since` 是客户端发送请求时， 携带上次请求返回的 `Last-Modified` 值，通过此字段值告诉服务器该资源上次请求返回的最后被修改时间 
- `Etag` 和  `If-None-Match`
  -  `Etag` 是服务器响应请求时，返回当前资源文件的一个唯一标识(由服务器生成) 
  -  `If-None-Match` 是客户端再次发起该请求时，携带上次请求返回的唯一标识 `Etag` 值，通过此字段值告诉服务器该资源上次请求返回的唯一标识值 



